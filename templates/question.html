{% extends "layout.html" %}
{% block title %}Question{% endblock %}
{% block content %}

    <h1 align="center">{{ question['title'] }}</h1>
    <div id="question_box">
        <div id="infobox">
            <div id="date">
                <em><strong>Submitted at: </strong>{{ question['submission_time'] }}</em>
            </div>
            <div id="delete">
                <a href="/question/{{ question['id'] }}/delete"><img src="../images/icons/delete.png" width="20"></a>
            </div>
            <div id="edit">
                <a href="/question/{{ question['id'] }}/edit"><img src="../images/icons/edit.png" width="20"></a>
            </div>
            <div id="comment">
                <a href="/question/{{ question['id'] }}/new-comment"><img src="../images/icons/comment.png" width="20"></a>
            </div>
            <div id="vote_number">
                <em><strong>Vote: </strong>{{ question['vote_number'] }}</em>
                <a href="/question/{{ question['id'] }}/upvote"><img src="../images/icons/upvote.png" width="10"></a>
                <a href="/question/{{ question['id'] }}/downvote"><img src="../images/icons/downvote.png" width="10"></a>
            </div>
            <div id="view_number">
                <em><strong>View: </strong>{{ question['view_number'] }}</em>
            </div>
        </div>
        <div id="question-message">
            <div style="font-family: Arial; white-space: pre;">{{ question['message'] }}</div>
        </div>
        <div id="image">
            {% if question['image'] %}
                <a href="/picture/question/{{ question['id'] }}"><img src="../{{ question['image'] }}" style="max-height: 300px; max-width: 300px;"></a>
            {%  endif %}
        </div>

        {% if q_comments %}
            <div id="comments">
                {% for comment in q_comments %}
                    <div>
                        <small>{{ comment['submission_time'] }}</small><br>
                        {% if comment['edited_count'] %}
                            <small>Edit counter: {{ comment['edited_count'] }}</small>
                        {% endif %}
                        <div id="edit">
                            <a href="/comment/{{ comment['id'] }}/edit"><img src="../images/icons/edit.png" width="20"></a>
                        </div>
                        <p>{{ comment['message'] }}</p>
                    </div>
                {% endfor %}
            </div>
        {%  endif %}
    </div>

    <h2 align="center">Answers</h2>

    {% for answer in answers %}
    <div class="answer">
            <div id="answerinfobox">
                <div id="date">
                    <em><strong>Submitted at: </strong>{{ answer['submission_time'] }}</em>
                </div>
                <div id="delete">
                    <a href="/answer/{{ answer['id'] }}/delete"><img src="../images/icons/delete.png" width="20"></a>
                </div>
                <div id="edit">
                    <a href="/answer/{{ answer['id'] }}/edit"><img src="../images/icons/edit.png" width="20"></a>
                </div>
                <div id="comment">
                    <a href="/answer/{{ answer['id'] }}/new-comment"><img src="../images/icons/comment.png" width="20"></a>
                </div>
                <div id="vote_number">
                    <em><strong>Vote: </strong>{{ answer['vote_number'] }}</em>
                    <a href="/answer/{{ answer['id'] }}/upvote"><img src="../images/icons/upvote.png" width="10"></a>
                    <a href="/answer/{{ answer['id'] }}/downvote"><img src="../images/icons/downvote.png" width="10"></a>
                </div>
            </div>
            <div class="answermessage">
                <div style="font-family: Arial; white-space: pre;">{{ answer['message'] }}</div>
            </div>
        <div class="answerpic">
            {% if answer['image'] %}
                <a href="/picture/answer/{{ answer['id'] }}"><img src="../{{ answer['image'] }}" width="300"></a>
            {%  endif %}
        </div>
        {% if answer['id'] in a_comments %}
            <div id="comments">
                {% for comment in a_comments[answer['id']] %}
                    <div>
                        <small>{{ comment['submission_time'] }}</small> <br>
                        {% if comment['edited_count'] %}
                            <small>Edit counter: {{ comment['edited_count'] }}</small>
                        {% endif %}
                        <div id="edit">
                            <a href="/comment/{{ comment['id'] }}/edit"><img src="../images/icons/edit.png" width="15"></a>
                        </div>
                        <p>{{ comment['message'] }}</p>
                    </div>
                {% endfor %}
            </div>
        {%  endif %}
    </div>
    {% endfor %}
    <div style="margin: 40px 0 60px;" id="new_answer" align="center">
        <div id="new_answer_form" style="width: 740px" align="left">
            <form action="/question/{{ question['id'] }}/new-answer" method="POST" enctype="multipart/form-data">
                <p><textarea name="message" rows="10" cols="100" placeholder="Enter your answer!" required></textarea></p>
                <p><input type="file" name="picture_upload" accept=".jpg, .png, .jpeg"></p>
                <p><input type="submit" value="Add answer" name="new_answer"></p>
            </form>
        </div>
    </div>
    

{% endblock %}